# ============================================================================
# AutoML Platform - Production Environment Variables
# This file is generated by scripts/generate-secrets.sh and documents all
# runtime secrets required for production deployments. The default values
# below are command expressions so that no plaintext secret is stored in the
# repository. Run `make secrets` (or ./scripts/generate-secrets.sh) to replace
# them with concrete values.
# ============================================================================

ENVIRONMENT=production

# =========================== CORE APPLICATION ================================
# Secret key for signing internal tokens (FastAPI)
AUTOML_SECRET_KEY=$(openssl rand -base64 48)
# Secret key used by FastAPI JWT authentication
JWT_SECRET_KEY=$(openssl rand -base64 48)
# Session secret for Streamlit UI sessions
SESSION_SECRET_KEY=$(openssl rand -base64 32)

# =============================== DATABASE ====================================
# Primary PostgreSQL credentials
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_USER=automl
POSTGRES_PASSWORD=$(openssl rand -base64 32)
POSTGRES_DB=automl
POSTGRES_MULTIPLE_DATABASES=automl,keycloak,airflow,metadata
# Service accounts for observability and backups
POSTGRES_MONITORING_USER=monitoring
POSTGRES_MONITORING_PASSWORD=$(openssl rand -base64 24)
POSTGRES_BACKUP_USER=backup_user
POSTGRES_BACKUP_PASSWORD=$(openssl rand -base64 24)

# ================================ REDIS ======================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=$(openssl rand -base64 32)

# =============================== MINIO =======================================
MINIO_ENDPOINT=minio:9000
MINIO_ACCESS_KEY=$(openssl rand -hex 16)
MINIO_SECRET_KEY=$(openssl rand -base64 32)
MINIO_SERVICE_PASSWORD=$(openssl rand -base64 24)

# =============================== MLFLOW ======================================
MLFLOW_TRACKING_URI=http://mlflow:5000
MLFLOW_USER=mlflow
MLFLOW_PASSWORD=$(openssl rand -base64 24)

# =============================== KEYCLOAK ====================================
KEYCLOAK_HOSTNAME=keycloak
KEYCLOAK_PORT=8080
KEYCLOAK_REALM=automl
KEYCLOAK_CLIENT_ID=automl-platform
KEYCLOAK_CLIENT_SECRET=$(openssl rand -base64 32)
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=$(openssl rand -base64 24)

# ================================ WORKERS ====================================
FLOWER_USER=admin
FLOWER_PASSWORD=$(openssl rand -base64 24)

# =============================== MONITORING ==================================
GRAFANA_USER=admin
GRAFANA_PASSWORD=$(openssl rand -base64 24)
PROMETHEUS_RETENTION=30d

# ============================ BILLING & WEBHOOKS =============================
STRIPE_API_KEY=$(openssl rand -base64 32)
STRIPE_WEBHOOK_SECRET=$(openssl rand -base64 32)

# ============================= OPTIONAL PROVIDERS ============================
# Replace with vendor issued tokens if integrating with external LLM providers.
OPENAI_API_KEY=
ANTHROPIC_API_KEY=
HUGGINGFACEHUB_API_TOKEN=

# ============================= ENVIRONMENT NOTES =============================
# For staging and development environments, copy this file to
# `.env.staging` or `.env.development` and regenerate the secrets using
# the generate-secrets.sh script with the desired target:
#   ./scripts/generate-secrets.sh --environment staging
#   ./scripts/generate-secrets.sh --environment development
# ============================================================================
